appId: host.exp.Exponent
---
- launchApp
- waitForAnimationToEnd

# Open Expo project
- extendedWaitUntil:
    visible: "campus-guide"
    timeout: 30000
- tapOn: "campus-guide"

# AC1: SGW loads by default (toggle visible)
- extendedWaitUntil:
    visible: "SGW"
    timeout: 30000
- assertVisible: "SGW"
- assertVisible: "Loyola"

# AC4: SGW buildings visible (verify one SGW building popup)
# (Index can shift, so we try 2 likely candidates only)
- tapOn:
    id: "VKPointFeature"
    index: 26
- waitForAnimationToEnd

- runFlow:
    when:
      notVisible: "HENRY F. HALL BUILDING"
    commands:
      - waitForAnimationToEnd
      - tapOn:
          id: "VKPointFeature"
          index: 27
      - waitForAnimationToEnd

- extendedWaitUntil:
    visible: "HENRY F. HALL BUILDING"
    timeout: 10000
- assertVisible: "HENRY F. HALL BUILDING"

# Close popup (use whatever your app shows; keep one of these)
- tapOn: "✕"
- waitForAnimationToEnd

# AC2 + AC3: Switch to Loyola and verify map updates + building visible
- tapOn: "Loyola"
- waitForAnimationToEnd

- tapOn:
    id: "VKPointFeature"
    index: 23
- waitForAnimationToEnd


- extendedWaitUntil:
    visible: "COMMUNICATION STUDIES AND JOURNALISM BUILDING"
    timeout: 10000
- assertVisible: "COMMUNICATION STUDIES AND JOURNALISM BUILDING"
- assertVisible: "7141 Sherbrooke St. W."

- tapOn: "✕"
- waitForAnimationToEnd

# Switch back to SGW (AC3)
- tapOn: "SGW"
- waitForAnimationToEnd

# Optional: quick sanity check that a SGW building can still be opened
- tapOn:
    id: "VKPointFeature"
    index: 27
- waitForAnimationToEnd