appId: host.exp.exponent
---
- launchApp
- waitForAnimationToEnd

# Open Expo project
- extendedWaitUntil:
    visible: "campus-guide"
    timeout: 30000
- tapOn: "campus-guide"

# Wait for SGW tab
- extendedWaitUntil:
    visible: "SGW"
    timeout: 30000
- tapOn: "SGW"
- hideKeyboard
- waitForAnimationToEnd

# Attempt 1: Tap Hall feature (index may vary on other devices)
- tapOn:
    id: "VKPointFeature"
    index: 26
- waitForAnimationToEnd

# Fallback taps only if the Hall sheet title isn't visible
- runFlow:
    when:
      notVisible: "HENRY F. HALL BUILDING"
    commands:
      - tapOn:
          point: "25%,54%"
      - waitForAnimationToEnd

- runFlow:
    when:
      notVisible: "HENRY F. HALL BUILDING"
    commands:
      - tapOn:
          point: "25%,68%"
      - waitForAnimationToEnd

- runFlow:
    when:
      notVisible: "HENRY F. HALL BUILDING"
    commands:
      - tapOn:
          point: "24%,54%"
      - waitForAnimationToEnd

- runFlow:
    when:
      notVisible: "HENRY F. HALL BUILDING"
    commands:
      - tapOn:
          point: "26%,54%"
      - waitForAnimationToEnd

- runFlow:
    when:
      notVisible: "HENRY F. HALL BUILDING"
    commands:
      - tapOn:
          point: "25%,53%"
      - waitForAnimationToEnd

- runFlow:
    when:
      notVisible: "HENRY F. HALL BUILDING"
    commands:
      - tapOn:
          point: "25%,55%"
      - waitForAnimationToEnd

# Wait for popup
- extendedWaitUntil:
    visible: "HENRY F. HALL BUILDING"
    timeout: 15000

# Assertions (exact strings from hierarchy)
- assertVisible: "HENRY F. HALL BUILDING"
- assertVisible: "1455 DeMaisonneuve W"
- assertVisible: "Directions"

# Close popup
- tapOn: "âœ•"

# Verify closed
- assertNotVisible: "HENRY F. HALL BUILDING"